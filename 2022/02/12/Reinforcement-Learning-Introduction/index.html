<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Reinforcement Learning Introduction | Crestfallen Knight</title><meta name="keywords" content="Reinforcement Learning,Theory"><meta name="author" content="琥珀川"><meta name="copyright" content="琥珀川"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Introduction After submitting a paper to ICML2022 in Jan, I feel really unconfident in my English academic writing since my supervisor almost polished every sentences in the paper for me and iterated">
<meta property="og:type" content="article">
<meta property="og:title" content="Reinforcement Learning Introduction">
<meta property="og:url" content="https://citychan.github.io/2022/02/12/Reinforcement-Learning-Introduction/index.html">
<meta property="og:site_name" content="Crestfallen Knight">
<meta property="og:description" content="Introduction After submitting a paper to ICML2022 in Jan, I feel really unconfident in my English academic writing since my supervisor almost polished every sentences in the paper for me and iterated">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://citychan.github.io/2022/02/12/Reinforcement-Learning-Introduction/cover.png">
<meta property="article:published_time" content="2022-02-12T23:13:34.000Z">
<meta property="article:modified_time" content="2022-02-18T18:00:03.730Z">
<meta property="article:author" content="琥珀川">
<meta property="article:tag" content="Reinforcement Learning">
<meta property="article:tag" content="Theory">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://citychan.github.io/2022/02/12/Reinforcement-Learning-Introduction/cover.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://citychan.github.io/2022/02/12/Reinforcement-Learning-Introduction/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Reinforcement Learning Introduction',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-18 12:00:03'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="Crestfallen Knight" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/%E4%B8%9C%E6%96%B9%E5%AE%9A%E5%8A%A9.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">10</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">8</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/board/"><i class="fa-fw fas fa-heartbeat"></i><span> Board</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> life</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/2022/02/12/Reinforcement-Learning-Introduction/cover.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Crestfallen Knight</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/board/"><i class="fa-fw fas fa-heartbeat"></i><span> Board</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> life</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Reinforcement Learning Introduction</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-02-12T23:13:34.000Z" title="Created 2022-02-12 17:13:34">2022-02-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-02-18T18:00:03.730Z" title="Updated 2022-02-18 12:00:03">2022-02-18</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Reading-Note/">Reading Note</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Reinforcement Learning Introduction"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><a href="/2022/02/12/Reinforcement-Learning-Introduction/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count" data-xid="/2022/02/12/Reinforcement-Learning-Introduction/" itemprop="commentCount"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="introduction">Introduction</h1>
<p>After submitting a paper to ICML2022 in Jan, I feel really unconfident in my English academic writing since my supervisor almost polished every sentences in the paper for me and iterated the paper until 3 am, the deadline was three hours away. Although my boss is a easy-going person, he suggested me to improve my writing and presentation skills which are important for my Ph.d defense and job interviews. Therefore, I realize that I need to write something in English, not restricted to my mother tongue.</p>
<p>This semester, CS department is giving a course 'Reinforcement Learning' which I am very interested in. However, I am having an full-time internship so I can't enroll in this class. Hence, I decided to read the textbook on my own. I will write down the key contents of each chapter in the following days.</p>
<h2 id="text-book">text book</h2>
<p><a target="_blank" rel="noopener" href="https://web.stanford.edu/class/psych209/Readings/SuttonBartoIPRLBook2ndEd.pdf">Reinforcement Learning: An Introduction</a><br />
<a target="_blank" rel="noopener" href="http://incompleteideas.net/">Richard S. Sutton</a> and <a target="_blank" rel="noopener" href="https://people.cs.umass.edu/~barto/">Andrew G. Barto</a>.</p>
<h2 id="elements-of-reinforcement-learning">Elements of Reinforcement Learning</h2>
<p>A reinforcement learning system consists of : a <em>policy</em>, a <em>reward</em>, a <em>value function</em> and a <em>model</em> of environment.</p>
<h3 id="policy">Policy</h3>
<p>Policy defines the way of an agent behaving at a specific environment(timestep, states of the system, action set). It corresponds to a set of <em>stimulus-reponse</em> map. Assuming all agents are rational, the policy of each agent will correspond to the action bring maximum reward in term of value function at the state at given timestep in the environment.</p>
<h3 id="reward-and-value">Reward and Value</h3>
<p>Reward defines the goal of a reinforcement learning problem. After agents make action at each step, the environment will convert to next state according to the action made by agents while agents will receive rewards in an immedidate sense. The goal of each agent is to maximize the total rewards from the beginning to the end(summation of rewards at all rounds). However, value of state specifies what is good in the long run. It is not so straightforward to tell how much value a state has, not as simple as reward does. For example, a state might have a very low reward for each agent in the system but this state might bring very high rewards in the following round. Then we can say this state has high value.</p>
<h3 id="model">Model</h3>
<p>Model needs to define how the environment changes according to the actions made by agents. The common way to describe the environment is using <strong>transition matrix</strong>. If we can explicitly compute the transition matrix to plan, we can call this <strong>model-based</strong> methods. However, it is strict to demand transition matrix. Most of the time, we can not know the transition matrix. Apart from model-based methods, <strong>model-free</strong> methods which simultaneously learns the model of environment by trial and error are more practical for reinforcement learning problems.</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">琥珀川</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://citychan.github.io/2022/02/12/Reinforcement-Learning-Introduction/">https://citychan.github.io/2022/02/12/Reinforcement-Learning-Introduction/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Reinforcement-Learning/">Reinforcement Learning</a><a class="post-meta__tags" href="/tags/Theory/">Theory</a></div><div class="post_share"><div class="social-share" data-image="/2022/02/12/Reinforcement-Learning-Introduction/cover.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/02/12/Reinforcement-Learning-Chap-2/"><img class="next-cover" src="/2022/02/12/Reinforcement-Learning-Chap-2/cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Reinforcement Learning Chap 2</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2022/02/12/Reinforcement-Learning-Chap-2/" title="Reinforcement Learning Chap 2"><img class="cover" src="/2022/02/12/Reinforcement-Learning-Chap-2/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-12</div><div class="title">Reinforcement Learning Chap 2</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/%E4%B8%9C%E6%96%B9%E5%AE%9A%E5%8A%A9.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">琥珀川</div><div class="author-info__description">"Well, what do we have here? You must be a new arrival.</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">10</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">8</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">2</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/CityChan" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:huanchengch@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title=""><i class="rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>Announcement</span></div><div class="announcement_content">My boring blog and my boring life.</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#text-book"><span class="toc-number">1.1.</span> <span class="toc-text">text book</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#elements-of-reinforcement-learning"><span class="toc-number">1.2.</span> <span class="toc-text">Elements of Reinforcement Learning</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#policy"><span class="toc-number">1.2.1.</span> <span class="toc-text">Policy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reward-and-value"><span class="toc-number">1.2.2.</span> <span class="toc-text">Reward and Value</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#model"><span class="toc-number">1.2.3.</span> <span class="toc-text">Model</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/02/12/Reinforcement-Learning-Introduction/" title="Reinforcement Learning Introduction"><img src="/2022/02/12/Reinforcement-Learning-Introduction/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Reinforcement Learning Introduction"/></a><div class="content"><a class="title" href="/2022/02/12/Reinforcement-Learning-Introduction/" title="Reinforcement Learning Introduction">Reinforcement Learning Introduction</a><time datetime="2022-02-12T23:13:34.000Z" title="Created 2022-02-12 17:13:34">2022-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/02/12/Reinforcement-Learning-Chap-2/" title="Reinforcement Learning Chap 2"><img src="/2022/02/12/Reinforcement-Learning-Chap-2/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Reinforcement Learning Chap 2"/></a><div class="content"><a class="title" href="/2022/02/12/Reinforcement-Learning-Chap-2/" title="Reinforcement Learning Chap 2">Reinforcement Learning Chap 2</a><time datetime="2022-02-12T23:11:02.000Z" title="Created 2022-02-12 17:11:02">2022-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2018/06/08/%E5%A4%B1%E7%9C%A0%E6%98%AF%E6%9E%95%E5%A4%B4%E4%B9%8B%E4%B8%8A%E6%97%A0%E5%B0%BD%E7%9A%84%E6%B5%81%E6%B5%AA/" title="失眠是枕头之上无尽的流浪"><img src="/2018/06/08/%E5%A4%B1%E7%9C%A0%E6%98%AF%E6%9E%95%E5%A4%B4%E4%B9%8B%E4%B8%8A%E6%97%A0%E5%B0%BD%E7%9A%84%E6%B5%81%E6%B5%AA/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="失眠是枕头之上无尽的流浪"/></a><div class="content"><a class="title" href="/2018/06/08/%E5%A4%B1%E7%9C%A0%E6%98%AF%E6%9E%95%E5%A4%B4%E4%B9%8B%E4%B8%8A%E6%97%A0%E5%B0%BD%E7%9A%84%E6%B5%81%E6%B5%AA/" title="失眠是枕头之上无尽的流浪">失眠是枕头之上无尽的流浪</a><time datetime="2018-06-09T04:21:37.000Z" title="Created 2018-06-08 23:21:37">2018-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2018/06/05/%E7%96%AF%E7%8B%82%E9%92%BB%E7%9F%B3/" title="疯狂钻石"><img src="/2018/06/05/%E7%96%AF%E7%8B%82%E9%92%BB%E7%9F%B3/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="疯狂钻石"/></a><div class="content"><a class="title" href="/2018/06/05/%E7%96%AF%E7%8B%82%E9%92%BB%E7%9F%B3/" title="疯狂钻石">疯狂钻石</a><time datetime="2018-06-06T04:15:31.000Z" title="Created 2018-06-05 23:15:31">2018-06-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2018/02/16/%E9%99%A4%E5%A4%95/" title="除夕"><img src="/2018/02/16/%E9%99%A4%E5%A4%95/cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="除夕"/></a><div class="content"><a class="title" href="/2018/02/16/%E9%99%A4%E5%A4%95/" title="除夕">除夕</a><time datetime="2018-02-17T05:11:56.000Z" title="Created 2018-02-16 23:11:56">2018-02-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By 琥珀川</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Local search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'PQmED38xPMnJ3kf6CMTUDQ42-gzGzoHsz',
      appKey: 'IQg2vnruCAcUmpu55oo3rPnu',
      avatar: 'monsterid',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: true
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="/true"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"left","hOffset":0,"vOffset":-50},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false,"tagMode":false});</script></body></html>